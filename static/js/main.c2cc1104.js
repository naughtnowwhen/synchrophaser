/*! For license information please see main.c2cc1104.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(288)},288:(e,t)=>{var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),d=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function g(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||m}function E(){}function b(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||m}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=g.prototype;var x=b.prototype=new E;x.constructor=b,y(x,g.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function M(){}var _={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function T(e,t,i){var s=i.ref;return{$$typeof:r,type:e,key:t,ref:void 0!==s?s:null,props:i}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var A=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function F(e,t,s,n,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,h=!1;if(null===e)h=!0;else switch(a){case"bigint":case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case r:case i:h=!0;break;case p:return F((h=e._init)(e._payload),t,s,n,o)}}if(h)return o=o(e),h=""===n?"."+C(e,0):n,S(o)?(s="",null!=h&&(s=h.replace(A,"$&/")+"/"),F(o,t,s,"",function(e){return e})):null!=o&&(N(o)&&(l=o,c=s+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+h,o=T(l.type,c,l.props)),t.push(o)),1;h=0;var u,f=""===n?".":n+":";if(S(e))for(var m=0;m<e.length;m++)h+=F(n=e[m],t,s,a=f+C(n,m),o);else if("function"===typeof(m=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=d&&u[d]||u["@@iterator"])?u:null))for(e=m.call(e),m=0;!(n=e.next()).done;)h+=F(n=n.value,t,s,a=f+C(n,m++),o);else if("object"===a){if("function"===typeof e.then)return F(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(M,M):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,n,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return h}function w(e,t,r){if(null==e)return e;var i=[],s=0;return F(e,i,"","",function(e){return t.call(r,e,s++)}),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},q={map:w,forEach:function(e,t,r){w(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return w(e,function(){t++}),t},toArray:function(e){return w(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=q,t.Component=g,t.Fragment=s,t.Profiler=o,t.PureComponent=b,t.StrictMode=n,t.Suspense=h,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=y({},e.props),s=e.key;if(null!=t)for(n in void 0!==t.key&&(s=""+t.key),t)!j.call(t,n)||"key"===n||"__self"===n||"__source"===n||"ref"===n&&void 0===t.ref||(i[n]=t[n]);var n=arguments.length-2;if(1===n)i.children=r;else if(1<n){for(var o=Array(n),a=0;a<n;a++)o[a]=arguments[a+2];i.children=o}return T(e.type,s,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,r){var i,s={},n=null;if(null!=t)for(i in void 0!==t.key&&(n=""+t.key),t)j.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(s[i]=t[i]);var o=arguments.length-2;if(1===o)s.children=r;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];s.children=a}if(e&&e.defaultProps)for(i in o=e.defaultProps)void 0===s[i]&&(s[i]=o[i]);return T(e,n,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,r={};_.T=r;try{var i=e(),s=_.S;null!==s&&s(r,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(M,P)}catch(n){P(n)}finally{null!==t&&null!==r.types&&(t.types=r.types),_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,r){return _.H.useActionState(e,t,r)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return _.H.useEffect(e,t)},t.useEffectEvent=function(e){return _.H.useEffectEvent(e)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,r){return _.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return _.H.useReducer(e,t,r)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return _.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return _.H.useTransition()},t.version="19.2.0"},579:(e,t,r)=>{e.exports=r(799)},672:(e,t,r)=>{var i=r(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==i?null:""+i,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=l.T,r=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=r,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var r=t.as,i=c(r,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,n="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:n}):"script"===r&&o.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:n,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var r=t.as,i=c(r,t.crossOrigin);o.d.L(e,r,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var r=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},799:(e,t)=>{var r=Symbol.for("react.transitional.element");function i(e,t,i){var s=null;if(void 0!==i&&(s=""+i),void 0!==t.key&&(s=""+t.key),"key"in t)for(var n in i={},t)"key"!==n&&(i[n]=t[n]);else i=t;return t=i.ref,{$$typeof:r,type:e,key:s,ref:void 0!==t?t:null,props:i}}Symbol.for("react.fragment"),t.jsx=i,t.jsxs=i},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(672)}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}var i=r(43),s=r(950);const n=Math.sqrt(3),o=.5*(n-1),a=(3-n)/6,l=e=>0|Math.floor(e),c=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function h(e){const t=512,r=new Uint8Array(t);for(let i=0;i<256;i++)r[i]=i;for(let i=0;i<255;i++){const t=i+~~(e()*(256-i)),s=r[i];r[i]=r[t],r[t]=s}for(let i=256;i<t;i++)r[i]=r[i-256];return r}const u=1.08,p=1.37,f=150,d=50,m=4,y=200,v=42,g=900,E=0,b=8,x=2400,S=.0116,M=50,_=900,j=1,T=.1,N=.5,A=-100,C=100,F=30,w=.3,R=.01,P=20;class q{constructor(){let{wavelength:e=f,rhoMin:t=u,rhoMax:r=p,driftVelocity:i=d,numOctaves:s=m,seed:n=v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.wavelength=e,this.rhoMin=t,this.rhoMax=r,this.driftVelocity=i,this.numOctaves=s,this.seed=n;const y=function(e){return function(){return(e=(9301*e+49297)%233280)/233280}}(n);this.noise=function(){const e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random),t=new Float64Array(e).map(e=>c[e%12*2]),r=new Float64Array(e).map(e=>c[e%12*2+1]);return function(i,s){let n=0,c=0,h=0;const u=(i+s)*o,p=l(i+u),f=l(s+u),d=(p+f)*a,m=i-(p-d),y=s-(f-d);let v,g;m>y?(v=1,g=0):(v=0,g=1);const E=m-v+a,b=y-g+a,x=m-1+2*a,S=y-1+2*a,M=255&p,_=255&f;let j=.5-m*m-y*y;if(j>=0){const i=M+e[_];j*=j,n=j*j*(t[i]*m+r[i]*y)}let T=.5-E*E-b*b;if(T>=0){const i=M+v+e[_+g];T*=T,c=T*T*(t[i]*E+r[i]*b)}let N=.5-x*x-S*S;if(N>=0){const i=M+1+e[_+1];N*=N,h=N*N*(t[i]*x+r[i]*S)}return 70*(n+c+h)}}(y),this.baseFrequency=1/e,this.amplitudeSum=0;for(let o=0;o<s;o++)this.amplitudeSum+=Math.pow(.5,o)}_fbmNoise2D(e,t){let r=0,i=1,s=this.baseFrequency;for(let o=0;o<this.numOctaves;o++){const n=e*s,o=t*s;r+=this.noise(n,o)*i,i*=.5,s*=2}const n=(r/this.amplitudeSum+1)/2;return Math.max(0,Math.min(1,n))}getDensity(e,t,r){const i=e-this.driftVelocity*r,s=this._fbmNoise2D(i,t);return this.rhoMin+s*(this.rhoMax-this.rhoMin)}getDensityGrid(e,t,r){const i=[];for(let s=0;s<t.length;s++){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[s],l=this.getDensity(o,a,r);n.push(l)}i.push(n)}return i}getStatistics(e){let t=0,r=1/0,i=-1/0,s=0;for(const a of e)for(const e of a)t+=e,r=Math.min(r,e),i=Math.max(i,e),s++;const n=t/s;let o=0;for(const a of e)for(const e of a)o+=Math.pow(e-n,2);return{mean:n,min:r,max:i,std:Math.sqrt(o/s)}}}class k{constructor(){let{x:e=g,y:t=E,inertia:r=b,rpmNominal:i=x,kAero:s=S,governorKp:n=M,baseTorque:o=_}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.x=e,this.y=t,this.inertia=r,this.kAero=s,this.rpmNominal=i,this.omegaTarget=this.rpmToRadS(i),this.governorKp=n,this.baseTorque=o,this.omega=this.omegaTarget,this.rpm=i,this.bladeAngle=0,this.rhoLocal=1.225,this.qAero=0,this.qEngine=o,this.qNet=0,this.alpha=0}static rpmToRadS(e){return 2*e*Math.PI/60}static radSToRpm(e){return 60*e/(2*Math.PI)}rpmToRadS(e){return k.rpmToRadS(e)}radSToRpm(e){return k.radSToRpm(e)}computeAeroTorque(e,t){return this.kAero*e*Math.pow(t,2)}computeEngineTorque(e){const t=this.omegaTarget-e;let r=this.baseTorque+this.governorKp*t;return r=Math.max(0,r),r}update(e,t,r){this.rhoLocal=r.getDensity(this.x,this.y,t),this.qAero=this.computeAeroTorque(this.rhoLocal,this.omega),this.qEngine=this.computeEngineTorque(this.omega),this.qNet=this.qEngine-this.qAero,this.alpha=this.qNet/this.inertia,this.omega+=this.alpha*e,this.omega=Math.max(0,this.omega),this.rpm=this.radSToRpm(this.omega),this.bladeAngle+=this.omega*e,this.bladeAngle=this.bladeAngle%(2*Math.PI)}getState(){return{x:this.x,y:this.y,rpm:this.rpm,omega:this.omega,rhoLocal:this.rhoLocal,qAero:this.qAero,qEngine:this.qEngine,qNet:this.qNet,alpha:this.alpha,rpmError:this.rpmNominal-this.rpm}}setRpmTarget(e){this.rpmNominal=e,this.omegaTarget=this.rpmToRadS(e)}}class D{constructor(){let{kP:e=j,kI:t=T,kD:r=N,integratorMin:i=A,integratorMax:s=C,phaseScale:n=F,derivativeFilterAlpha:o=w,deadband:a=R,rateLimit:l=P}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.kP=e,this.kI=t,this.kD=r,this.phaseScale=n,this.derivativeFilterAlpha=o,this.deadband=a,this.rateLimit=l,this.integrator=0,this.integratorMin=i,this.integratorMax=s,this.enabled=!1,this.phaseError=0,this.previousPhaseError=0,this.filteredDerivative=0,this.previousRpmCorrection=0,this.rpmCorrection=0,this.proportionalTerm=0,this.integralTerm=0,this.derivativeTerm=0,this.maxPhaseError=0,this.cumulativeError=0,this.updateCount=0}enable(){this.enabled=!0,this.integrator=0,this.phaseError=0,this.previousPhaseError=0,this.filteredDerivative=0,this.previousRpmCorrection=0}disable(){this.enabled=!1,this.integrator=0,this.phaseError=0,this.previousPhaseError=0,this.filteredDerivative=0,this.previousRpmCorrection=0}resetStats(){this.maxPhaseError=0,this.cumulativeError=0,this.updateCount=0,this.integrator=0}computePhaseError(e,t){const r=e-t;return Math.atan2(Math.sin(r),Math.cos(r))}update(e,t,r){if(!this.enabled)return this.phaseError=0,this.rpmCorrection=0,this.proportionalTerm=0,this.integralTerm=0,this.derivativeTerm=0,0;const i=this.computePhaseError(e,t);if(Math.abs(i)<this.deadband?(this.phaseError=0,this.integrator*=.99):this.phaseError=i,this.updateCount+=1,this.cumulativeError+=Math.abs(i),this.maxPhaseError=Math.max(this.maxPhaseError,Math.abs(i)),this.proportionalTerm=this.kP*this.phaseError,Math.abs(this.phaseError)>0){this.integrator+=this.phaseError*r;const e=.5;this.integrator=Math.max(-e,Math.min(e,this.integrator))}if(this.integralTerm=this.kI*this.integrator,r>0){const e=(this.phaseError-this.previousPhaseError)/r;this.filteredDerivative=this.derivativeFilterAlpha*e+(1-this.derivativeFilterAlpha)*this.filteredDerivative,this.derivativeTerm=this.kD*this.filteredDerivative}else this.derivativeTerm=0;this.previousPhaseError=this.phaseError;const s=(this.proportionalTerm+this.integralTerm+this.derivativeTerm)*this.phaseScale;if(r>0){const e=this.rateLimit*r;let t=s-this.previousRpmCorrection;t=Math.max(-e,Math.min(e,t)),this.rpmCorrection=this.previousRpmCorrection+t}else this.rpmCorrection=s;return this.rpmCorrection=Math.max(-15,Math.min(15,this.rpmCorrection)),this.previousRpmCorrection=this.rpmCorrection,this.rpmCorrection}getStats(){const e=0===this.updateCount?0:this.cumulativeError/this.updateCount;return{enabled:this.enabled,phaseError:this.phaseError,phaseErrorDeg:180*this.phaseError/Math.PI,rpmCorrection:this.rpmCorrection,proportionalTerm:this.proportionalTerm,integralTerm:this.integralTerm,integrator:this.integrator,maxPhaseError:this.maxPhaseError,maxPhaseErrorDeg:180*this.maxPhaseError/Math.PI,meanAbsError:e,meanAbsErrorDeg:180*e/Math.PI,updateCount:this.updateCount}}}class O extends D{constructor(){let{kP:e=j,kI:t=T,kD:r=N,kF:i=.5,integratorMin:s=A,integratorMax:n=C,phaseScale:o=F,derivativeFilterAlpha:a=w,deadband:l=R,rateLimit:c=P}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({kP:e,kI:t,kD:r,integratorMin:s,integratorMax:n,phaseScale:o,derivativeFilterAlpha:a,deadband:l,rateLimit:c}),this.kF=i,this.freqError=0,this.freqErrorRpm=0,this.frequencyTerm=0,this.filteredFreqError=0,this.freqFilterAlpha=.1}enable(){super.enable(),this.freqError=0,this.freqErrorRpm=0,this.frequencyTerm=0,this.filteredFreqError=0}disable(){super.disable(),this.freqError=0,this.freqErrorRpm=0,this.frequencyTerm=0,this.filteredFreqError=0}update(e,t,r,i,s){if(!this.enabled)return this.phaseError=0,this.freqError=0,this.rpmCorrection=0,this.proportionalTerm=0,this.integralTerm=0,this.derivativeTerm=0,this.frequencyTerm=0,0;const n=this.computePhaseError(e,t);if(this.freqError=r-i,this.filteredFreqError=this.freqFilterAlpha*this.freqError+(1-this.freqFilterAlpha)*this.filteredFreqError,this.freqErrorRpm=60*this.freqError/(2*Math.PI),Math.abs(n)<this.deadband?(this.phaseError=0,this.integrator*=.99):this.phaseError=n,this.updateCount+=1,this.cumulativeError+=Math.abs(n),this.maxPhaseError=Math.max(this.maxPhaseError,Math.abs(n)),this.proportionalTerm=this.kP*this.phaseError,Math.abs(this.phaseError)>0){this.integrator+=this.phaseError*s;const e=.5;this.integrator=Math.max(-e,Math.min(e,this.integrator))}if(this.integralTerm=this.kI*this.integrator,s>0){const e=(this.phaseError-this.previousPhaseError)/s;this.filteredDerivative=this.derivativeFilterAlpha*e+(1-this.derivativeFilterAlpha)*this.filteredDerivative,this.derivativeTerm=this.kD*this.filteredDerivative}else this.derivativeTerm=0;this.previousPhaseError=this.phaseError,this.frequencyTerm=this.kF*this.filteredFreqError;const o=(this.proportionalTerm+this.integralTerm+this.derivativeTerm)*this.phaseScale+60*this.frequencyTerm/(2*Math.PI);if(s>0){const e=this.rateLimit*s;let t=o-this.previousRpmCorrection;t=Math.max(-e,Math.min(e,t)),this.rpmCorrection=this.previousRpmCorrection+t}else this.rpmCorrection=o;return this.rpmCorrection=Math.max(-15,Math.min(15,this.rpmCorrection)),this.previousRpmCorrection=this.rpmCorrection,this.rpmCorrection}getStats(){const e=super.getStats();return e.freqError=this.freqError,e.freqErrorRpm=this.freqErrorRpm,e.frequencyTerm=this.frequencyTerm,e.filteredFreqError=this.filteredFreqError,e}}var H=r(579);const I=function(){const[e,t]=(0,i.useState)("off"),[r,s]=(0,i.useState)(!1),[n,o]=(0,i.useState)({time:0,rpmMain:x,rpmFollower:x,rpmError:0,rollingAvg:0,densityMain:1.225,densityFollower:1.225,phaseError:0,correction:0}),a=(0,i.useRef)(null),l=(0,i.useRef)(null),c=(0,i.useRef)(null);(0,i.useEffect)(()=>{const e=new q,t=new k({x:g,y:-60}),i=new k({x:g,y:60}),s=new D,n=new O;l.current={densityField:e,propMain:t,propFollower:i,synchroBaseline:s,synchroAdvanced:n,errorHistory:[],rollingWindowSeconds:15,time:0,lastUpdateTime:null};const o=()=>{!r&&l.current&&(h(),u()),c.current=requestAnimationFrame(o)};return o(),()=>{c.current&&cancelAnimationFrame(c.current)}},[r]),(0,i.useEffect)(()=>{if(!l.current)return;const{synchroBaseline:t,synchroAdvanced:r,propFollower:i}=l.current;i.setRpmTarget(x),"off"===e?(t.disable(),r.disable()):"baseline"===e?(t.enable(),r.disable()):"advanced"===e&&(t.disable(),r.enable())},[e]);const h=()=>{if(!l.current)return;const t=l.current,r=.033;t.time+=r,t.propMain.update(r,t.time,t.densityField),t.propFollower.update(r,t.time,t.densityField);let i=0;"baseline"===e?i=t.synchroBaseline.update(t.propMain.bladeAngle,t.propFollower.bladeAngle,r):"advanced"===e&&(i=t.synchroAdvanced.update(t.propMain.bladeAngle,t.propFollower.bladeAngle,t.propMain.omega,t.propFollower.omega,r)),0!==i&&t.propFollower.setRpmTarget(x+i);const s=Math.abs(t.propMain.rpm-t.propFollower.rpm);for(t.errorHistory.push({time:t.time,error:s});t.errorHistory.length>0&&t.time-t.errorHistory[0].time>t.rollingWindowSeconds;)t.errorHistory.shift();let n=0;if(t.errorHistory.length>0){n=t.errorHistory.reduce((e,t)=>e+t.error,0)/t.errorHistory.length}let a=0;if("baseline"===e){a=t.synchroBaseline.getStats().phaseErrorDeg}else if("advanced"===e){a=t.synchroAdvanced.getStats().phaseErrorDeg}o({time:t.time,rpmMain:t.propMain.rpm,rpmFollower:t.propFollower.rpm,rpmError:s,rollingAvg:n,densityMain:t.propMain.rhoLocal,densityFollower:t.propFollower.rhoLocal,phaseError:a,correction:i})},u=()=>{const t=a.current;if(!t||!l.current)return;const r=t.getContext("2d"),i=l.current;t.width=800,t.height=500;const s=Array.from({length:40},(e,t)=>t/39*1e3),n=Array.from({length:25},(e,t)=>t/24*y-100),o=i.densityField.getDensityGrid(s,n,i.time),c=t.width/40,h=t.height/25;for(let e=0;e<25;e++)for(let t=0;t<40;t++){const i=(o[e][t]-1.08)/(1.37-1.08),s=Math.floor(255*i),n=Math.floor(150*(1-Math.abs(2*i-1))),a=Math.floor(255*(1-i));r.fillStyle="rgb(".concat(s,",").concat(n,",").concat(a,")"),r.fillRect(t*c,e*h,c,h)}const u=(e,i)=>{const s=e.x/1e3*t.width,n=(e.y+100)/y*t.height;r.fillStyle=i,r.beginPath(),r.arc(s,n,15,0,2*Math.PI),r.fill(),r.strokeStyle="white",r.lineWidth=3;for(let t=0;t<3;t++){const i=e.bladeAngle+2*t*Math.PI/3,o=12*Math.cos(i),a=12*Math.sin(i);r.beginPath(),r.moveTo(s,n),r.lineTo(s+o,n+a),r.stroke()}};u(i.propMain,"#22c55e"),u(i.propFollower,"off"===e?"#ef4444":"#3b82f6")};return(0,H.jsxs)("div",{className:"App",children:[(0,H.jsxs)("header",{children:[(0,H.jsx)("h1",{children:"\u2708\ufe0f Synchrophaser Simulation"}),(0,H.jsx)("p",{children:"Three-Mode Comparison: OFF / BASELINE / ADVANCED"})]}),(0,H.jsxs)("div",{className:"description",children:[(0,H.jsx)("h3",{children:"\ud83c\udfaf What This Demonstrates"}),(0,H.jsxs)("ul",{children:[(0,H.jsxs)("li",{children:[(0,H.jsx)("strong",{children:"OFF Mode:"})," Propellers run independently - high RPM error and vibration"]}),(0,H.jsxs)("li",{children:[(0,H.jsx)("strong",{children:"BASELINE Mode:"})," PID synchrophaser - 69.5% error reduction"]}),(0,H.jsxs)("li",{children:[(0,H.jsx)("strong",{children:"ADVANCED Mode:"})," Phase-Frequency Detector - 73.0% error reduction"]})]}),(0,H.jsx)("p",{children:(0,H.jsx)("strong",{children:"Try switching modes in real-time to see the difference!"})})]}),(0,H.jsxs)("div",{className:"controls",children:[(0,H.jsxs)("div",{className:"mode-buttons",children:[(0,H.jsxs)("button",{className:"btn ".concat("off"===e?"btn-off":"btn-inactive"),onClick:()=>t("off"),children:["OFF",(0,H.jsx)("br",{}),(0,H.jsx)("small",{children:"(No Sync)"})]}),(0,H.jsxs)("button",{className:"btn ".concat("baseline"===e?"btn-baseline":"btn-inactive"),onClick:()=>t("baseline"),children:["BASELINE",(0,H.jsx)("br",{}),(0,H.jsx)("small",{children:"(PID)"})]}),(0,H.jsxs)("button",{className:"btn ".concat("advanced"===e?"btn-advanced":"btn-inactive"),onClick:()=>t("advanced"),children:["ADVANCED",(0,H.jsx)("br",{}),(0,H.jsx)("small",{children:"(PFD)"})]})]}),(0,H.jsx)("button",{className:"btn btn-control",onClick:()=>s(!r),children:r?"\u25b6\ufe0f Resume":"\u23f8\ufe0f Pause"})]}),(0,H.jsxs)("div",{className:"visualization",children:[(0,H.jsx)("div",{className:"canvas-container",children:(0,H.jsx)("canvas",{ref:a})}),(0,H.jsxs)("div",{className:"info-panel",children:[(0,H.jsxs)("div",{className:"info-section",children:[(0,H.jsx)("h3",{children:"Mode"}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"Current:"}),(0,H.jsx)("span",{className:"stat-value",children:e.toUpperCase()})]}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"Time:"}),(0,H.jsxs)("span",{className:"stat-value",children:[n.time.toFixed(1),"s"]})]})]}),(0,H.jsxs)("div",{className:"info-section",children:[(0,H.jsx)("h3",{children:"Propeller RPM"}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"Main:"}),(0,H.jsx)("span",{className:"stat-value",children:n.rpmMain.toFixed(1)})]}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"Follower:"}),(0,H.jsx)("span",{className:"stat-value",children:n.rpmFollower.toFixed(1)})]}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"Error:"}),(0,H.jsx)("span",{className:"stat-value",children:n.rpmError.toFixed(1)})]}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"15s Avg:"}),(0,H.jsx)("span",{className:"stat-value",children:n.rollingAvg.toFixed(1)})]})]}),(0,H.jsxs)("div",{className:"info-section",children:[(0,H.jsx)("h3",{children:"Density (kg/m\xb3)"}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"Main:"}),(0,H.jsx)("span",{className:"stat-value",children:n.densityMain.toFixed(3)})]}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"Follower:"}),(0,H.jsx)("span",{className:"stat-value",children:n.densityFollower.toFixed(3)})]})]}),"off"!==e&&(0,H.jsxs)("div",{className:"info-section",children:[(0,H.jsx)("h3",{children:"Synchrophaser"}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"Phase Error:"}),(0,H.jsxs)("span",{className:"stat-value",children:[n.phaseError.toFixed(1),"\xb0"]})]}),(0,H.jsxs)("div",{className:"stat",children:[(0,H.jsx)("span",{className:"stat-label",children:"Correction:"}),(0,H.jsxs)("span",{className:"stat-value",children:[n.correction>=0?"+":"",n.correction.toFixed(1)]})]})]})]})]}),(0,H.jsx)("footer",{children:(0,H.jsxs)("p",{children:["\ud83e\udd16 Generated with Claude Code | ",(0,H.jsx)("a",{href:"https://github.com/naughtnowwhen/synchrophaser",target:"_blank",rel:"noopener noreferrer",children:"View on GitHub"})]})})]})};s.render((0,H.jsx)(i.StrictMode,{children:(0,H.jsx)(I,{})}),document.getElementById("root"))})();
//# sourceMappingURL=main.c2cc1104.js.map